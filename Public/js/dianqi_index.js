/* SVN.committedRevision=1222949 */
$(document).ready(function(){$(window).scroll(function(){if($(window).scrollTop()>0){$(".fixedRight .toTop").show()}else{$(".fixedRight .toTop").hide()}});$(".fixedRight .toTop a").click(function(){$("body,html").scrollTop(0);return false});if($.browser.version<=6){a("fixedRight");function a(b){var c="."+b;var e=$(window).height();var d=e/2-40;$(window).scroll(function(){$(c).css("top",(d+$(window).scrollTop())+"px")})}}});var lazyLoadDelay=50;(function(a){a.YHD={imgLoad:{objArray:[],timeout:null,timeoutLoad:function(c){var b=a.YHD.imgLoad;if(a.YHD.imgLoad.timeout){return}b.timeout=setTimeout(function(){b.timeout=null;b.load()},c)},loadImg:function(d){if(d&&d.length>0){for(var c=0,b=d.length;c<b;c++){if(a.inArray(d[c],a.YHD.imgLoad.objArray)==-1){a.YHD.imgLoad.objArray.push(d[c])}}}},pageTop:function(){return document.documentElement.clientHeight+Math.max(document.documentElement.scrollTop,document.body.scrollTop)},load:function(){var c=a.YHD.imgLoad;if(c.timeout){return}var d=c.objArray;while(d.length){var f=d.shift();if(!f){continue}var e=a("#"+f);if(!e.length){continue}var b=0;$(e[0].getElementsByTagName("img")).each(function(){var g=this.getAttribute("original");if(g){$(this).attr("src",g).removeAttr("original");
b++}});if(b>0){return c.timeoutLoad(b*5)}}}}}})(jQuery);var busystcok=URLPrefix.busystock?URLPrefix.busystock:"http://gps.yhd.com";var yhdChannelV2={};(function(h){yhdChannelV2=yhdChannelV2||{};var g=false;var e=500;var f=200;yhdChannelV2.loadPriceDom=yhdChannelV2.loadPriceDom||[];yhdChannelV2.pageTop=function(){return document.documentElement.clientHeight+Math.max(document.documentElement.scrollTop,document.body.scrollTop)};yhdChannelV2.getPriceName=function(c){var a=c,b="";if(a==1){b="1号店价："}else{if(a==2){b="促销价："}}if(globalShowMarketPrice&&globalShowMarketPrice==1){b="价格："}return b};yhdChannelV2.getPriceDomHtml=function(b){var a=b.html,d=b.price,c=b.priceType;if(!a){return"请期待"}if(a!="y"){if(a.indexOf("#price#")>-1){a=a.replace("#price#",d)}if(a.indexOf("#name#")>-1){a=a.replace("#name#",yhdChannelV2.getPriceName(c))}}else{a="&yen;"+d}return a
};yhdChannelV2.loadPrice=function(){if(g){return}g=true;var m=0;try{if(!h.cookie("provinceId")){return}var a=yhdChannelV2.pageTop();if(!yhdChannelV2.lazyLoadPrice){yhdChannelV2.lazyLoadPrice=h("[priceDomId]")}if(yhdChannelV2.loadPriceDom&&yhdChannelV2.loadPriceDom.length>0){$.merge(yhdChannelV2.lazyLoadPrice,yhdChannelV2.loadPriceDom);yhdChannelV2.loadPriceDom=[]}var d="?mcsite="+currSiteId+"&provinceId="+h.cookie("provinceId");var c=[];if(yhdChannelV2.lazyLoadPrice&&yhdChannelV2.lazyLoadPrice.length>0){var b={};yhdChannelV2.lazyLoadPrice.each(function(j){if(f>m&&h(this).offset().top<=a+100){var i=h(this).attr("priceDomId");if(!b[i]){b[i]=[];b[i].push({elem:h(this)});d+="&pmIds="+i;m++}else{b[i].push({elem:h(this)})}}else{c.push(this)}});yhdChannelV2.lazyLoadPrice=h(c);if(m>0){var l=busystcok+"/busystock/restful/truestock";
h.getJSON(l+d+"&callback=?",function(i){if(!i||i.ERROR){return}h.each(i,function(v,t){var x=t.pmId,w=t.productPrice,j=t.curPriceType,k=t.marketPrice,u=b[x];h.each(u,function(z,s){var r=s.elem.find("[realprice]");var o=s.elem.find("[highprice]");if(!globalShowMarketPrice||globalShowMarketPrice!=1){if(o&&o.length>0){if(w==k){o.css("visibility","hidden")}else{o.html("&yen;"+k)}}}else{o.html("&yen;"+k)}if(r&&r.length>0){var p={html:r.attr("realprice"),price:w,priceType:j};var q=yhdChannelV2.getPriceDomHtml(p);r.html(q);r.removeAttr("realprice")}s.elem.removeAttr("priceDomId")})})})}}}catch(n){setTimeout("yhdChannelV2.loadPrice()",e)}if(m>=f){setTimeout("yhdChannelV2.loadPrice()",e)}g=false};h(window).bind("scroll",yhdChannelV2.loadPrice);setTimeout("yhdChannelV2.loadPrice()",e)})(jQuery);var yhdF2E={};yhdF2E.tabSwitch=function(d,j,a,c){var b=$(a);b.find(d).each(function(){$(this).children("li").eq(c).addClass("on")});b.each(function(){$(this).find(j).eq(c).show()});b.each(function(e){var f=b.eq(e).find(d).children("li");f.mouseover(function(){var i=f.index(this),h=$(this);var g=b.eq(e).find(j);h.siblings("li").removeClass("on");h.addClass("on");g.hide();g.eq(i).stop().show()})})};yhdF2E.clSlider=function(a,b,c,d,h){var J=$(c),G=J.find(a),E=J.find(b),I=E.children("li");var C=parseFloat(J.height()),H=parseFloat(J.width());var B=G.children("li").length,D=d;var w;F();function F(){A();e();z()}function e(){w=setInterval(A,h)}function z(){I.mouseover(function(){D=I.index($(this));$(this).siblings().removeClass("on").end().addClass("on");clearInterval(w);A()}).mouseout(function(){e()
})}function A(){if(D<B){var f=C*D;I.eq(D).siblings().removeClass("on").end().addClass("on");G.stop().animate({top:-f},300);D++;if(D==B){D=0}}}};yhdF2E.showTag=function(){$(".flagshipList a").hover(function(){$(this).children(".extra").show()},function(){$(this).children(".extra").hide()})};yhdF2E.bindTracker=function(b){$("#"+b).delegate("a[tk]","click",function(){var d=$(this),a=d.attr("tk");if(a){addTrackPositionToCookie("1",a)}})};function setAddressCityback(h){if(currSiteId==2){addTrackPositionToCookie("1","YW_Province")}var l=window.location.href,i=$.cookie("provinceId");if(l.indexOf("provinceId=")!=-1){var k=/provinceId=[0-9]+/;l=l.replace(k,"provinceId="+i);window.location.href=l;return}var j=/^(http:\/\/){0,1}([^/]+\/)[0-9]+[/]{0,1}([^/]+){0,1}$/;if(l.match(j)){l=l.replace(j,"$1$2"+i+"/$3");
window.location.href=l;return}var m=/^(http:\/\/){0,1}([^\/]+\/channel\/[0-9]+_)[0-9]+[\/]{0,1}([^/]+){0,1}$/;if(l.match(m)){l=l.replace(m,"$1$2"+i+"/$3");window.location.href=l;return}var n=/^(http:\/\/){0,1}(channel|channel-home)(\.[a-zA-Z0-9]+\.com\/[a-zA-Z0-9]+\/)(baobao_[0-9]+\/){0,1}[0-9]+\/{0,1}(\?[^\/]+){0,1}(#[^\/]+)*$/;if(l.match(n)){l=l.replace(n,"$1$2$3$4"+i+"/$5");window.location.href=l;return}window.location.reload()}(function(n){var p=1,i=window.location.href,o=n.cookie("provinceId");var k=/^http:\/\/channel\.[^\/]+\.com\/[a-zA-Z]+\/([0-9]+)/;m(k);var j=/^http:\/\/[^\/]+\.com\/([0-9]+)[\/]{0,1}/;m(j);var l=/^http:\/\/[^\/]+\/channel\/[0-9]+_([0-9]+)/;m(l);function m(a){var b=i.match(a);if(b&&b.length>1){p=b[1];if(o&&o>0&&p!=o){setAddressCityback()}}}})(jQuery);$(function(){new SwitchTab({imgId:"bannerBg",btnId:"bannerBtn",time:5000,speed:600,autoPlay:true,effect:"opacity",activeClass:"on"});$(".bargain_price li a").hover(function(){$(this).stop().animate({top:-220})},function(){$(this).stop().animate({top:0})});$(".proBox .pic").mouseenter(function(){var a=$(this).find("img");if(!a.is(":animated")){a.animate({opacity:1},100);$(this).siblings(".pic").find("img").animate({opacity:0.6},100)}});$(".proBox").mouseleave(function(){$(this).find("img").animate({opacity:1},100)});$(".cate_text li").hover(function(){$(this).addClass("cur").siblings("li").removeClass("cur");var g=$(".cate_text").offset().top,e=$(".cate_text").height(),c=$(window).height(),a=$(window).scrollTop(),i=$(this).position().top,f=$(".category_nav").height(),d=$(this).outerHeight(true),h=$(this).find(".menu_text"),b=h.height();
if(b<61){h.css("height",61)}var j=h.outerHeight(true);if(f>j){if((g+e)>=(c+a)){if((i+d)>=j){h.css("top",(i+d-j))}else{h.css("top",0)}}else{if((f-i)>=j){h.css("top",i)}else{h.css("top",(f-j))}}}},function(){$(this).removeClass("cur")});$(".screen_tab .tab_tit li").mouseover(function(){$(this).addClass("cur").siblings("li").removeClass("cur");$(this).parents(".screen_tab").find(".tab_con").eq($(".screen_tab .tab_tit li").index(this)).show().siblings(".tab_con").hide()});$(".quick_search li").mouseover(function(){$(this).addClass("cur").siblings("li").removeClass("cur");$(this).parents(".quick_search_box").find(".search_screening").eq($(".quick_search li").index(this)).show().siblings(".search_screening").hide()});$(".quick_search select").mouseover(function(){$(this).addClass("select_color")});
$(".brand_store_box li").mouseover(function(){$(this).addClass("cur").siblings("li").removeClass("cur");$(this).parents(".brand_store_box").find(".product_list").eq($(".brand_store_box li").index(this)).show().siblings(".product_list").hide()});$(".floor_tab li").mouseover(function(){var a=$(this).parent().find("li").index(this);$(this).addClass("cur").siblings("li").removeClass("cur");$(this).parents(".floor_right").find(".floor_con").eq(a).show().siblings(".floor_con").hide()});fnNewsRoll();countdown("#limitProm .countdown");fastNav()});function fnNewsRoll(){var c=$(".news_list"),b=$("ul",c),d=$("li",c).length,a=d-3,e=0;if(d<=3){$(".arrow_icon",c).hide()}if(e==0){$(".arrow_t",c).hide()}$(".arrow_t",c).click(function(){if(e>0){e--;b.animate({marginTop:-24*e},500);$(".arrow_b",c).show();if(e==0){$(".arrow_t",c).hide()
}}});$(".arrow_b",c).click(function(){if(e<a){e++;b.animate({marginTop:-24*e},500);$(".arrow_t",c).show();if(e==a){$(".arrow_b",c).hide()}}})}function fastNav(){var c=$(".fast_nav"),e=c.height();c.find(".tit").toggle(function(){$(this).text("展开");c.addClass("fast_nav_shrink").animate({width:"32px",height:"130px"},300);c.find(".nav_btn li").animate({height:"32px"},300)},function(){$(this).text("收起");c.removeClass("fast_nav_shrink").animate({width:"62px",height:e},300);c.find(".nav_btn li").animate({height:"45px"},300)});c.find(".back_top").click(function(){$("body,html").animate({scrollTop:"0"},500)});var a=$(".floor_wrap"),b=a.length,h=a.outerHeight(true),d=a.first()&&a.first().offset()&&a.first().offset().top,f=$(window).height();$(window).scroll(function(){var k=$(window).scrollTop(),j=f+k,i=Math.ceil((j-100-d)/h);
if(j>d+(h*b)-30+(f-100)){$(".fast_nav .nav_locate li").removeClass("cur")}else{if(i>0){$(".fast_nav .nav_locate li").eq(i-1).addClass("cur").siblings("li").removeClass("cur")}else{$(".fast_nav .nav_locate li").removeClass("cur")}}if($.browser.version<=6){c.css({top:(f-e-100+$(window).scrollTop())+"px",bottom:"auto"})}});var g="";$(".fast_nav .nav_locate li").click(function(){var i=$(this).index()+1;g="#floor"+i;var j=$(g).offset().top;$("body,html").animate({scrollTop:j-100},500)})}function countdown(a){if($(a).length<1){return false}var d=$(a).attr("remaintime");var i=32;var e=$(a).find(".h1 span");var c=$(a).find(".h2 span");var j=$(a).find(".m1 span");var h=$(a).find(".m2 span");var g=$(a).find(".s1 span");var f=$(a).find(".s2 span");var b=setInterval(function(){if(d==0){return}var m=d;var l=Math.floor(m/3600000);
m-=l*3600000;var k=Math.floor(m/60000);m-=k*60000;var s=Math.floor(m/1000);var u=l<10?"0"+l:l;var t=k<10?"0"+k:k;var r=s<10?"0"+s:s;var o=String(u).substr(0,1);var n=String(u).substr(1,1);var w=String(t).substr(0,1);var v=String(t).substr(1,1);var q=String(r).substr(0,1);var p=String(r).substr(1,1);e.animate({top:-o*i});c.animate({top:-n*i});j.animate({top:-w*i});h.animate({top:-v*i});g.animate({top:-q*i});f.animate({top:-p*i});d-=1000},1000)}var SwitchTab=function(a){this.init(a)};SwitchTab.prototype={space:0,sprite:null,ac:"",time:0,btnArr:[],n:0,lastBtn:null,timer:0,ap:false,effect:"",speed:0,liArr:[],init:function(d){this.space=d.space||0;this.time=d.time||3000;this.ac=d.activeClass;this.ap=d.autoPlay||false;this.effect=d.effect||"left";this.speed=d.speed||300;this.sprite=this.getElem(d.imgId);
if(!this.sprite){return}this.liArr=this.getElem(d.imgId).getElementsByTagName("li")||[];if(!this.getElem(d.btnId)){return}this.btnArr=this.getElem(d.btnId).getElementsByTagName("span")||[];var a=this;var b=d.eventType||"mouseover";this.onChange=d.onChange||null;a.lastBtn=a.btnArr[0];for(var c=0;c<a.btnArr.length;c++){a.btnArr[c].index=c;a.btnArr[c]["on"+b]=function(){a.n=this.index;a.move()}}$("#"+d.btnId).parent().mouseenter(function(){clearInterval(a.timer)});$("#"+d.btnId).parent().mouseleave(function(){a.autoPlay()});if(a.effect=="opacity"){for(c=0;c<a.liArr.length;c++){$(a.liArr[c]).css({opacity:0,"z-index":-1})}$(a.liArr[0]).css({opacity:1,"z-index":1})}this.autoPlay()},getElem:function(a){return document.getElementById(a)},move:function(){var a=this;var d=a.effect;if(d=="opacity"){for(var b=0;
b<a.liArr.length;b++){if(b==a.n){$(a.liArr[b]).css({"z-index":1});$(a.liArr[b]).stop().animate({opacity:1},a.speed)}else{$(a.liArr[b]).stop().animate({opacity:0},a.speed);$(a.liArr[b]).css({"z-index":-1})}}}else{if(d=="visible"){for(b=0;b<a.liArr.length;b++){$(a.liArr[b]).css({display:b==a.n?"block":"none"})}}else{var c={};c[d]=-a.n*a.space;$(a.sprite).stop().animate(c,a.speed)}}$(a.lastBtn).removeClass(a.ac);$(a.btnArr[a.n]).addClass(a.ac);a.lastBtn=a.btnArr[a.n];if(this.onChange!=null){this.onChange()}},autoPlay:function(){if(this.ap){var b=this;var a=b.btnArr.length;b.timer=setInterval(function(){b.n++;if(b.n>a-1){b.n=0}b.move()},b.time)}}};(function(a){yhdF2E.dianqiChannel=new function(){this.lazyImg=function(){if(isWidescreen){a("#dianqiMain").lazyImg({wideAttr:"data-wi",indexLoad:true})}else{a("#dianqiMain").lazyImg({indexLoad:true})}};this.init=function(){b();c()};function c(){a("#shouc3c").bind("click",function(){var d;var g=/^http{1}s{0,1}:\/\/([a-z0-9_\\-]+\.)+(yihaodian|1mall|111|yhd){1}\.(com|com\.cn){1}\?(.+)+$/;var i=window.location.href;if(g.test(i)){d="&ref=favorite"}else{d="?ref=favorite"}var f=i+d;if(a.browser.msie&&(a.browser.version=="6.0")&&!a.support.style){f=i}try{if(document.all){window.external.AddFavorite(f,favorite)}else{try{window.sidebar.addPanel(favorite,f,"")}catch(h){alert("抱歉，您所使用的浏览器无法完成此操作。\n\n加入收藏失败，请使用Ctrl+D进行添加")}}}catch(h){alert("抱歉，您所使用的浏览器无法完成此操作。\n\n加入收藏失败，请使用Ctrl+D进行添加")}})}function b(){a("#limitProduct").find("dl").each(function(){var d=a(this).attr("promId");
if(!d){return}var e=busystcok+"/restful/promotion";var g=jQuery.cookie("provinceId");if(!g){g=1}var f="?mcsite="+currSiteId+"&provinceId="+g+"&promotionIds="+d;jQuery.getJSON(e+f+"&callback=?",function(h){if(!h||h.ERROR){return}jQuery.each(h,function(k,n){var q=a("#prod_"+n.pId);var l=q.attr("pId");var o=q.attr("mId");var j=q.attr("limit");if(o==n.mId){var m=n.canBuyNum;var p=q.find(".stock span");if(p&&p.length>0){if(j>0){p.html("<i style='width:"+(m/j*100)+"%;'>")}}}})})})}};a(document).ready(function(){yhdF2E.dianqiChannel.init();yhdF2E.dianqiChannel.lazyImg();yhdF2E.bindTracker("dianqiMain")})})(jQuery);(function(c,e,d){lazyLoadImageObjArry=lazyLoadImageObjArry||[];var b=jQuery("#main_content,#second_screen,#allChannels");if(b.length){var a=b.children();a.each(function(){if(this.getAttribute("lazyImg")=="y"){lazyLoadImageObjArry.push(this.id)
}else{jQuery(this).children().each(function(){if(this.getAttribute("lazyImg")=="y"){lazyLoadImageObjArry.push(this.id)}})}})}initImageLoad();jQuery.YHD.imgLoad.load()})(jQuery,window,document);